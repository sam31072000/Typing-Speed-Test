<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Typing Speedtest</title>
	
	<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<style type="text/css" media="screen">
		*{padding: 0;margin: 0;box-sizing: border-box;}
		.mainbox
		{
			width: 100%;
			height: 100vh;
			position: relative;
			background-image: url("https://media.gettyimages.com/photos/white-laptop-keyboard-picture-id157565469?s=2048x2048");
		}
		.content
		{
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%,-50%); /*to put a div in center  */
			text-align: center; /*text in xenter*/
		}
		h1{
			color: black;
			text-shadow: 2px 2px 3px blue;
			font-variant: small-caps;
		}
	</style>
</head>
<body>
	
	<div class="mainbox">
		<div class="content">
			
				<header>
					
				<h1><b>Speeding Test Website</b></h1><br>

				<h2 id="msg" style="color: black;"></h2><br><br>
				</header><!-- /header -->
			
			
		
			<textarea id="typebox" rows="8" cols="100" placeholder="Remember,Be nice" style="background-color: #444; color: white; font-size: 1.5rem;"></textarea><br><br>
			<button id="btn" class="btn btn-success">Start</button>
		</div>
	</div>
	<script>
		const setofwords=["Computer programmers write and test code that allows computer applications and software programs to function properly"," They turn the program designs created by software developers","Engineers into instructions that a computer can follow","In addition, programmers test newly created applications and programs to ensure that they produce the expected results","If they do not work correctly"," computer programmers check the code for mistakes and fix them"];
		const msg=document.getElementById('msg');
		const typeWords=document.getElementById('typebox');
		const btn=document.getElementById('btn');
		let startTime,endTime;
		const playGame = ()=>{
			let randomnumber=Math.floor(Math.random()*setofwords.length);
			//console.log(randomnumber); 
			msg.innerText = setofwords[randomnumber];
			let date=new Date();
			startTime=date.getTime();
			btn.innerText="Done";
			btn.className="btn btn-primary";

		};
		const endPlay = ()=>{
			let date=new Date();
			endTime=date.getTime();
			let totalTime = ((endTime-startTime)/1000);
			//console.log(totalTime);
			let totalStr=typeWords.value;
			typeWords.value="";
			let wordCount=wordCounter(totalStr);
			let speed= Math.round((wordCount/totalTime)*60);
			let finalMsg="You typed words at the speed of "+ speed +" words per minute in which ";
			finalMsg+=compareWords(msg.innerText,totalStr);
			msg.innerHTML=finalMsg;
		}
		const compareWords = (str1,str2) =>{
			let words1=str1.split(" ");
			let words2=str2.split(" ");
			let count=0;
			words1.forEach(function(item,index){
				if(item == words2[index])
					{count++;}
			})

			let errorWords=(words1.length-count);
			return ( count + " words are correct out of  " + words1.length + " words and total error is " + errorWords + " .");
 

		}
		const wordCounter = (str)=>{
			let response = str.split(" ").length;
			return response;
		}


		btn.addEventListener('click',function(){
			//console.log(this);
			if(this.innerText == 'Start'){
				typeWords.disabled = false;
				playGame();
			}
			else if(this.innerText == "Done")
			{
				typeWords.disabled= true;
				btn.innerText = "Start";
				btn.className="btn btn-success";
				endPlay();
			}
		})

	</script>
</body>
</html>